# Turma 725, Equipe 3:
# Marjorie Luize Martins Costa, RA: 24223084-5;
# Matheus Ferreira de Freitas, RA: 24123080-4;
# Henrique Hodel Babler, RA: 24123079-6

# ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣤⣤⣤⣤⣤⣤⣤⣤⣤⣤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⣼⣿⣿⠿⠿⠿⠿⠿⠿⠿⠿⠿⠿⣷⣿⣇⣀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#⠀⠀⠀⠀⠀⠀⢰⣾⣿⣿⡟⠛⠛⠁⠀⠀⠀⠀⠀⠀⠀⠀⠈⠛⠛⣿⣿⣿⣤⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#⠀⠀⠀⠀⣠⣿⡿⠿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⠿⣿⣧⣀⣤⣠⣄⣤⣀⠀⠀⠀⠀⠀⠀⠀
#⠀⠀⢰⣶⣿⡟⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠁⢙⣿⣿⣿⣿⣿⣿⣿⣶⡀⠀⠀⠀⠀⠀
#⠀⢠⣼⣿⠿⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⠂⠁⠀⠘⣿⣿⡇⠀⠀⠀⠀
#⢀⣸⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⢩⠁⠀⠀⠀⣿⣿⡇⠀⠀⠀⠀
#⣿⣿⣯⠀⠀⠀⣤⣴⣶⣶⣤⣦⢀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣤⣴⣶⣴⣦⡆⣼⣿⢘⠀⠀⠀⢰⣿⣿⡇⠀⠀⠀⠀
#⣿⣿⣟⠐⠀⣿⡏⠉⠈⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⢐⣿⠏⠉⢩⣿⣿⣿⣿⡿⢆⣰⣿⣿⣿⣿⣿⣷⣷⣀⠀⠀
#⣿⣿⣿⢤⠀⣿⣷⣤⣤⣿⣿⣿⣿⢨⣶⣴⣶⣶⣶⣶⣶⣶⣿⣿⣦⣤⣼⣿⣿⣿⣏⡓⠸⣿⡟⡛⠛⠛⣛⣿⣿⣿⠀⢀
#⠀⢸⣿⣿⣶⡹⡏⠀⠁⠈⠀⠹⠿⠘⣿⣧⣀⣀⣠⣀⣼⣿⠃⠿⠏⠩⢡⣼⣿⡿⠟⣿⣿⠋⠅⠀⠀⠀⠀⠀⢹⣿⣿⣿
#⠀⠈⢹⣿⣶⡇⠀⠀⠀⠀⠀⠀⠀⠀⠙⣻⣿⣿⣿⣿⣟⠉⠀⠀⠀⢰⣶⣿⣿⡇⠄⠈⣿⠁⠀⠀⠀⠀⠀⠀⢸⣿⣿⡇
#⠀⠀⠘⠛⣿⣿⣧⢅⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣤⣼⣿⠒⠛⠇⠀⠀⠀⠤⡀⠀⠀⠀⠀⠀⢸⣿⣿⡇
#⠀⠀⠀⠀⠉⠿⢿⣿⣶⣐⣆⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⡏⢉⣁⠀⢨⣄⢀⠀⠀⢁⣀⣀⣀⣀⣀⣸⣿⣿⣷
#⠀⠀⠀⠀⠀⠀⠘⠛⣿⣿⣿⣽⣿⣤⠤⡤⣤⢤⣤⡤⣤⣤⣤⣷⣿⡇⠀⠸⠀⠛⢻⣿⣴⣤⡄⣐⢸⣦⣿⣿⣿⣿⠛⠻
#⠀⠀⠀⠀⠀⠀⠀⠀⠉⣿⣿⣿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣭⠽⣄⣀⣸⣿⣿⣿⣿⣿⣿⣿⣿⡿⠿⠈⠀⠀
#⠀⠀⠀⠀⠀⠀⠀⠠⣶⣿⡟⣛⠉⠛⡟⣛⣛⠛⠛⠛⠛⠛⣻⢻⣿⣿⣿⣶⣾⣶⣿⣿⣿⡋⠋⠙⠋⠙⠋⠁⠀⠀⠀⠀
#⠀⠀⠀⠀⠀⠀⠀⢐⣿⣿⡟⠀⢈⣿⠇⠂⠀⠀⠀⠀⠀⠀⠀⠛⣿⣿⣿⣿⠿⠿⠿⠿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#⠀⠀⠀⠀⠀⠀⠀⠀⠉⢿⣷⣷⣾⣿⠀⠀⠀⢒⣶⣶⡖⡢⠀⠀⣿⣿⣿⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⢻⣿⣿⣦⡄⠀⢰⣿⣿⣇⢱⠀⣤⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠿⣿⣿⣿⣿⠿⠿⢿⣿⣿⣿⡿⠏⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
#⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⠛⠛⠛⠀⠀⠘⠛⠛⠛⠃⠀⠀⠀⠀⠀

import matplotlib.pyplot as plt
import numpy as np
import os
import tkinter as tk
from scipy.integrate import quad
from tkinter import messagebox




# Configuração inicial: Janela principal e declaração de variáveis e constantes
janela = tk.Tk()
janela.title("Menu")

frame_entrada = None
frame_saida = None

# Variáveis Gerais
hj = 6.626 * (10 ** -34)  # Constante de Planck em J.s
hev = 4.136 * (10 ** -15)  # Constante de Planck em eV.s
c = 3 * 10 ** 8  # Velocidade da luz no vácuo em m/s

l = 0  # Largura da caixa
ni = 0  # n inicial da partícula
nf = 0  # n final da partícula
n = 0 
a = 0  # Limite inferior para probabilidade
b = 0  # Limite superior para probabilidade
A = 0  # Amplitude em metros
k = 0  # Número de onda em metros
xp = 0  # Posição x em metros
m = 0  # Variável de controle de massa


#Limpei de maneira geral as Funções limpar_frames();m_option();simulador()[que por sinal eu fiquei bem confuso]; ainda não mechi nas funções caixa_1d e nas saidas das janelas tem que limpar elas ainda;
# Funções


# Função para limpar frames
def limpar_frames():
    global frame_entrada, frame_saida
    if frame_entrada:
        frame_entrada.destroy()
    if frame_saida:
        frame_saida.destroy()

def m_option(opcao):
    global m
    if opcao == "1":
        m = 1.67 * (10 ** -27)  # massa do próton
    elif opcao == "2":
        m = 9.11 * (10 ** -31)  # massa do elétron
    else:
        print("Opção inválida. Tente novamente.")


# Esta função foi criada para consolidar e simplificar a criação de labels e entradas(mta label slc)

def labels_and_entries(parent, process_func):
    global entrada_l, entrada_ni, entrada_nf, entrada_a, entrada_b
    entrada_l = tk.Entry(parent)
    tk.Label(parent, text="Largura da caixa (L) em m:").grid(row=1, column=0)
    entrada_l.grid(row=1, column=1)

    entrada_ni = tk.Entry(parent)
    tk.Label(parent, text="n inicial da particula (Ni):").grid(row=2, column=0)
    entrada_ni.grid(row=2, column=1)

    entrada_nf = tk.Entry(parent)
    tk.Label(parent, text="n final da particula (Nf):").grid(row=3, column=0)
    entrada_nf.grid(row=3, column=1)

    entrada_a = tk.Entry(parent)
    tk.Label(parent, text="a:").grid(row=4, column=0)
    entrada_a.grid(row=4, column=1)

    entrada_b = tk.Entry(parent)
    tk.Label(parent, text="b:").grid(row=5, column=0)
    entrada_b.grid(row=5, column=1)

    tk.Button(parent, text="Processar", command=process_func).grid(row=6, column=0, columnspan=2)




#Removi a função inutil que estava aqui

#Mudei a atualização da variável global 'm', que representa a massa
#da partícula,corrigi para garantir que os valor seja atualizado 
#adequadamente conforme a escolha nos Radiobuttons. 

#Implementei um rastreador ('trace') na variável StringVar associada, 
#que dispara a função m_option sempre que a seleção muda, só pra 
#garantir que a massa fique com a opção certa. 

#Além disso, eu limpei o codigo pra melhorar a organização, desculpa 
#se agluma função de anotação foi excluida como alguma não faziam #nada eu as removi

# Funções de interface
def simulador():
    global m, frame_entrada, frame_saida
    def processar_1():
        global L, Ni, Nf, a, b
        try:
            L = float(entrada_l.get())
            Ni = float(entrada_ni.get())
            Nf = float(entrada_nf.get())
            a = float(entrada_a.get())
            b = float(entrada_b.get())
            text_area_saida.delete(1.0, tk.END)
            text_area_saida.insert(tk.END, f"Resultados:\n----------------\nMassa: {m} kg\n"
                                           f"Largura da caixa (L): {L} m\n"
                                           f"n inicial da partícula (Ni): {Ni}\n"
                                           f"n final da partícula (Nf): {Nf}\n"
                                           f"a: {a}\n"
                                           f"b: {b}\n\n")
        except ValueError:
            messagebox.showerror("Erro de Entrada", "Por favor, insira valores numéricos válidos.")

    limpar_frames()
    frame_entrada = tk.Frame(janela)
    frame_entrada.pack()
    m_opcao = tk.StringVar(frame_entrada, "1")
    m_opcao.trace("w", lambda *args: m_option(m_opcao.get()))
    tk.Radiobutton(frame_entrada, text="Próton", variable=m_opcao, value="1").grid(row=0, column=0, padx=10, pady=5)
    tk.Radiobutton(frame_entrada, text="Elétron", variable=m_opcao, value="2").grid(row=0, column=1, padx=10, pady=5)
    labels_and_entries(frame_entrada, processar_1)
    frame_saida = tk.Frame(janela)
    frame_saida.pack()
    text_area_saida = tk.Text(frame_saida, width=50, height=10)
    text_area_saida.pack()

#Removi duplicações desnecessárias dos widgets, como a recriação de Radiobuttons e Frames

#Mudei a atualização da variável global 'm', que representa a massa da partícula

#Implementei um rastreador ('trace') na variável StringVar associada, que dispara a função
#m_option sempre que a seleção muda

#organizei o código para melhorar a clareza

#Limpei a estrutura dos frames e dos widgets, removendo blocos de código comentados que não eram
#utilizados

#Atualizei e simplifiquei a função processar_2 para coletar entradas, limpar a área de saída, e 
#preparar para exibição dos resultados


# Função para a caixa 1D
def caixa_1d():
    global m, frame_entrada, frame_saida
    def processar_2():
        global a, k, xp, l, m
        try:
            a = float(entrada_a.get())
            k = float(entrada_k.get())
            xp = float(entrada_xp.get())
            text_area_saida.delete(1.0, tk.END)
            text_area_saida.insert(tk.END, f"Entradas:\n----------------\nMassa: {m} kg\n"
                                           f"A: {a} m\nk: {k} m^-1\nPosição de x (que multiplique L): {xp}\n\n"
                                           "----------------\nResultados:\n----------------\n")
        except ValueError as e:
            messagebox.showerror("Erro de Entrada", "Por favor, insira valores numéricos válidos.")

    limpar_frames()
    frame_entrada = tk.Frame(janela)
    frame_entrada.pack()
    m_opcao = tk.StringVar(value="1")
    m_opcao.trace("w", lambda *args: m_option(m_opcao.get()))
    tk.Radiobutton(frame_entrada, text="Próton", variable=m_opcao, value="1").grid(row=0, column=0, padx=10, pady=5)
    tk.Radiobutton(frame_entrada, text="Elétron", variable=m_opcao, value="2").grid(row=0, column=1, padx=10, pady=5)
    label_a = tk.Label(frame_entrada, text="A em m:")
    label_a.grid(row=1, column=0)
    entrada_a = tk.Entry(frame_entrada)
    entrada_a.grid(row=1, column=1)
    label_k = tk.Label(frame_entrada, text="k em m^-1:")
    label_k.grid(row=2, column=0)
    entrada_k = tk.Entry(frame_entrada)
    entrada_k.grid(row=2, column=1)
    label_xp = tk.Label(frame_entrada, text="Posição de x (que multiplique L):")
    label_xp.grid(row=3, column=0)
    entrada_xp = tk.Entry(frame_entrada)
    entrada_xp.grid(row=3, column=1)
    botao_submit = tk.Button(frame_entrada, text="Processar", command=processar_2)
    botao_submit.grid(row=4, column=0, columnspan=2)
    frame_saida = tk.Frame(janela)
    frame_saida.pack()
    text_area_saida = tk.Text(frame_saida, width=50, height=10)
    text_area_saida.pack()

# Janela principal
menu = tk.Menu(janela)
menu.add_command(label="Simulador", command=simulador)
menu.add_command(label="Caixa 1D", command=caixa_1d)
menu.add_separator()  # Adiciona uma linha separadora
menu.add_command(label="Sair", command=janela.quit)
janela.config(menu=menu)
janela.mainloop()
# # Janela secundária
# submenu = tk.Menu(menu, tearoff=0)
# submenu.add_command(label="Teste", command=teste3)
# submenu.add_command(label="Teste 1", command=lambda: print("Teste 1"))  # Função lambda simples
# submenu.add_command(label="Teste 2", command=lambda: print("Teste 2"))

# menu.add_cascade(label="Funções", menu=submenu)

janela.config(menu=menu)
janela.mainloop()